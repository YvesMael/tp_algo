import pytest

from tp1.robot import greedy_bot, greedy_bot_path

# global variables to prepare test cases.
# feel free to update/complete with your own test cases
ROBOT_CUPIDE_DAMIER2x3_CASES = [(0, 0, 9),
                                (0, 1, 8),
                                (0, 2, 6),
                                (1, 0, 6),
                                (1, 1, 5),
                                (1, 2, 3)
                                ]

ROBOT_CUPIDE2_DAMIER2x3_CASES = [(0, 0, (9, [(0, 0), (0, 1), (0, 2), (1, 2)])),
                                 (0, 1, (8, [(0, 1), (0, 2), (1, 2)])),
                                 (0, 2, (6, [(0, 2), (1, 2)])),
                                 (1, 0, (6, [(1, 0), (1, 1), (1, 2)])),
                                 (1, 1, (5, [(1, 1), (1, 2)])),
                                 (1, 2, (3, [(1, 2)]))
                                 ]


ROBOT_CUPIDE_DAMIER5x7_CASES = [(0, 0, 132),
                                 (0, 1, 77),
                                 (0, 2, 73),
                                 (0, 3, 69),
                                 (0, 4, 69),
                                 (0, 5, 42),
                                 (0, 6, 6),
                                 (1, 0, 131),
                                 (1, 1, 75),
                                 (1, 2, 70),
                                 (1, 3, 67),
                                 (1, 4, 50),
                                 (1, 5, 41),
                                 (1, 6, 2),
                                 (2, 0, 89),
                                 (2, 1, 74),
                                 (2, 2, 67),
                                 (2, 3, 61),
                                 (2, 4, 42),
                                 (2, 5, 19),
                                 (2, 6, 2),
                                 (3, 0, 36),
                                 (3, 1, 33),
                                 (3, 2, 28),
                                 (3, 3, 21),
                                 (3, 4, 12),
                                 (3, 5, 9),
                                 (3, 6, 1),
                                 (4, 0, 21),
                                 (4, 1, 21),
                                 (4, 2, 16),
                                 (4, 3, 16),
                                 (4, 4, 9),
                                 (4, 5, 9),
                                 (4, 6, 0)
                                 ]

ROBOT_CUPIDE2_DAMIER5x7_CASES = [(0, 0, (132, [(0, 0), (1, 0), (2, 0), (2, 1), (2, 2), (2, 3), (2, 4), (2, 5), (3, 5), (4, 5), (4, 6)])),
                                 (0, 1, (77, [(0, 1), (1, 1), (2, 1), (2, 2), (2, 3), (2, 4), (2, 5), (3, 5), (4, 5), (4, 6)])),
                                 (0, 2, (73, [(0, 2), (1, 2), (2, 2), (2, 3), (2, 4), (2, 5), (3, 5), (4, 5), (4, 6)])),
                                 (0, 3, (69, [(0, 3), (0, 4), (1, 4), (2, 4), (2, 5), (3, 5), (4, 5), (4, 6)])),
                                 (0, 4, (69, [(0, 4), (1, 4), (2, 4), (2, 5), (3, 5), (4, 5), (4, 6)])),
                                 (0, 5, (42, [(0, 5), (1, 5), (2, 5), (3, 5), (4, 5), (4, 6)])),
                                 (0, 6, (6, [(0, 6), (1, 6), (2, 6), (3, 6), (4, 6)])),
                                 (1, 0, (131, [(1, 0), (2, 0), (2, 1), (2, 2), (2, 3), (2, 4), (2, 5), (3, 5), (4, 5), (4, 6)])),
                                 (1, 1, (75, [(1, 1), (2, 1), (2, 2), (2, 3), (2, 4), (2, 5), (3, 5), (4, 5), (4, 6)])),
                                 (1, 2, (70, [(1, 2), (2, 2), (2, 3), (2, 4), (2, 5), (3, 5), (4, 5), (4, 6)])),
                                 (1, 3, (67, [(1, 3), (2, 3), (2, 4), (2, 5), (3, 5), (4, 5), (4, 6)])),
                                 (1, 4, (50, [(1, 4), (2, 4), (2, 5), (3, 5), (4, 5), (4, 6)])),
                                 (1, 5, (41, [(1, 5), (2, 5), (3, 5), (4, 5), (4, 6)])),
                                 (1, 6, (2, [(1, 6), (2, 6), (3, 6), (4, 6)])),
                                 (2, 0, (89, [(2, 0), (2, 1), (2, 2), (2, 3), (2, 4), (2, 5), (3, 5), (4, 5), (4, 6)])),
                                 (2, 1, (74, [(2, 1), (2, 2), (2, 3), (2, 4), (2, 5), (3, 5), (4, 5), (4, 6)])),
                                 (2, 2, (67, [(2, 2), (2, 3), (2, 4), (2, 5), (3, 5), (4, 5), (4, 6)])),
                                 (2, 3, (61, [(2, 3), (2, 4), (2, 5), (3, 5), (4, 5), (4, 6)])),
                                 (2, 4, (42, [(2, 4), (2, 5), (3, 5), (4, 5), (4, 6)])),
                                 (2, 5, (19, [(2, 5), (3, 5), (4, 5), (4, 6)])),
                                 (2, 6, (2, [(2, 6), (3, 6), (4, 6)])),
                                 (3, 0, (36, [(3, 0), (3, 1), (3, 2), (3, 3), (4, 3), (4, 4), (4, 5), (4, 6)])),
                                 (3, 1, (33, [(3, 1), (3, 2), (3, 3), (4, 3), (4, 4), (4, 5), (4, 6)])),
                                 (3, 2, (28, [(3, 2), (3, 3), (4, 3), (4, 4), (4, 5), (4, 6)])),
                                 (3, 3, (21, [(3, 3), (4, 3), (4, 4), (4, 5), (4, 6)])),
                                 (3, 4, (12, [(3, 4), (4, 4), (4, 5), (4, 6)])),
                                 (3, 5, (9, [(3, 5), (4, 5), (4, 6)])),
                                 (3, 6, (1, [(3, 6), (4, 6)])),
                                 (4, 0, (21, [(4, 0), (4, 1), (4, 2), (4, 3), (4, 4), (4, 5), (4, 6)])),
                                 (4, 1, (21, [(4, 1), (4, 2), (4, 3), (4, 4), (4, 5), (4, 6)])),
                                 (4, 2, (16, [(4, 2), (4, 3), (4, 4), (4, 5), (4, 6)])),
                                 (4, 3, (16, [(4, 3), (4, 4), (4, 5), (4, 6)])),
                                 (4, 4, (9, [(4, 4), (4, 5), (4, 6)])),
                                 (4, 5, (9, [(4, 5), (4, 6)])),
                                 (4, 6, (0, [(4, 6)]))
                                 ]


############################
# test functions below
############################

@pytest.fixture
def damier2x3():
    return [[1, 2, 3],
            [1, 2, 3]]


@pytest.fixture
def damier5x7():
    return [[1, 2, 3, 0, 19, 1, 4],
            [42, 1, 3, 6, 8, 22, 0],
            [15, 7, 6, 19, 23, 10, 1],
            [3, 5, 7, 5, 3, 0, 1],
            [0, 5, 0, 7, 0, 9, 0]]



@pytest.mark.parametrize(('l', 'c', 'expected'), ROBOT_CUPIDE_DAMIER2x3_CASES)
def test_greedy_bot_small(damier2x3, l, c, expected):
    assert greedy_bot(damier2x3, l, c) == expected


@pytest.mark.parametrize(('l', 'c', 'expected'), ROBOT_CUPIDE_DAMIER5x7_CASES)
def test_greedy_bot_medium(damier5x7, l, c, expected):
    assert greedy_bot(damier5x7, l, c) == expected


@pytest.mark.parametrize(('l', 'c', 'expected'), ROBOT_CUPIDE2_DAMIER2x3_CASES)
def test_greedy_bot_path_small(damier2x3, l, c, expected):
    assert greedy_bot_path(damier2x3, l, c) == expected


@pytest.mark.parametrize(('l', 'c', 'expected'), ROBOT_CUPIDE2_DAMIER5x7_CASES)
def test_greedy_bot_path_medium(damier5x7, l, c, expected):
    assert greedy_bot_path(damier5x7, l, c) == expected
